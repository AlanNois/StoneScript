/*
Copyright © 2019-2022, Matjaž Guštin
<dev@matjaz.it> <https://matjaz.it>
Released under the BSD 3-clause license.

Level: Caves of fear
*/

var loadouts = import my/loadouts

// Apply health potion on low health.
?hp < 10
  activate potion

?loc = caves
  // Heal and gain armor while just walking
  ?target = waypoint | foe.distance > 20
    ?hp = maxhp
      loadouts.speed_shield()
    :
      loadouts.shield_ouroboros()

  // Pick up tar quickly with Star stone
  ?pickup.distance < 6
    loadouts.star_ouroboros()

  // Small enemies
  ?foe = bat | foe = spider | foe = eggs
  ^ foe = scorpion
    ?hp = maxhp
      loadouts.crossbow_speed()
    :
      loadouts.crossbow_ouroboros()
    // In case the enemy gets too close 
    ?foe.distance < 10
      loadouts.sword_shield()

  // Boss: Bolesh, the cunning
  ?foe = boss
    ?foe.distance > 10
      loadouts.dashing()
    :?foe.armor > 0
      loadouts.armor_piercing()
    :
      equipL sword *9
      equipR crossbow *8
